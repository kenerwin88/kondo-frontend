<template>
  <div>
    <header class="navbar navbar-expand navbar-dark flex-row align-items-md-center ct-navbar">
      <a class="navbar-brand mr-0 mr-md-2"
         href="https://demos.creative-tim.com/argon-design-system/docs/getting-started/overview.html"
         aria-label="Bootstrap">
        <img src="../assets/brand/white.png">
      </a>
      <ul class="navbar-nav flex-row mr-auto ml-4 d-none d-md-flex">
        <li class="nav-item">
          <a class="nav-link" href="https://demos.creative-tim.com/argon-design-system/index.html">Live Preview</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/creativetimofficial/argon-design-system/issues" target="_blank">Support</a>
        </li>
      </ul>
      <a href="https://www.creative-tim.com/product/argon-design-system" target="_blank"
         class="btn btn-neutral btn-icon ml-sm-3 d-none d-md-block">
      <span class="btn-inner--icon">
        <i class="fa fa-cloud-download mr-2"></i>
      </span>
        <span class="nav-link-inner--text">Download</span>
      </a>
      <button class="navbar-toggler ct-search-docs-toggle d-block d-md-none ml-auto ml-sm-0" type="button"
              data-toggle="collapse" data-target="#ct-docs-nav" aria-controls="ct-docs-nav" aria-expanded="false"
              aria-label="Toggle docs navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </header>
    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 ct-sidebar">
          <nav class="collapse ct-links" id="ct-docs-nav">
            <!-- Show links for all groups -->
            <div class="ct-toc-item active">
              <a class="ct-toc-link"
                 href="https://demos.creative-tim.com/argon-design-system/docs/getting-started/overview.html">Getting
                started</a>
              <ul class="nav ct-sidenav">
                <li class="active ct-sidenav-active">
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/getting-started/overview.html">Overview</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/getting-started/download.html">Download</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/getting-started/quick-start.html">Quick
                    start</a>
                </li>
                <li>
                  <a
                    href="https://demos.creative-tim.com/argon-design-system/docs/getting-started/license.html">License</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/getting-started/contents.html">Contents</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/getting-started/build-tools.html">Build
                    tools</a>
                </li>
              </ul>
            </div>
            <!-- Show links for all groups -->
            <div class="ct-toc-item active">
              <a class="ct-toc-link"
                 href="https://demos.creative-tim.com/argon-design-system/docs/foundation/colors.html">Foundation</a>
              <ul class="nav ct-sidenav">
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/foundation/colors.html">Colors</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/foundation/grid.html">Grid</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/foundation/typography.html">Typography</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/foundation/icons.html">Icons</a>
                </li>
              </ul>
            </div>
            <!-- Show links for all groups -->
            <div class="ct-toc-item active">
              <a class="ct-toc-link"
                 href="https://demos.creative-tim.com/argon-design-system/docs/components/alerts.html">Components</a>
              <ul class="nav ct-sidenav">
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/components/alerts.html">Alerts</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/components/badge.html">Badge</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/components/buttons.html">Buttons</a>
                </li>
                <li>
                  <a
                    href="https://demos.creative-tim.com/argon-design-system/docs/components/carousel.html">Carousel</a>
                </li>
                <li>
                  <a
                    href="https://demos.creative-tim.com/argon-design-system/docs/components/dropdowns.html">Dropdowns</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/components/forms.html">Forms</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/components/modal.html">Modal</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/components/navs.html">Navs</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/components/navbar.html">Navbar</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/components/pagination.html">Pagination</a>
                </li>
                <li>
                  <a
                    href="https://demos.creative-tim.com/argon-design-system/docs/components/popovers.html">Popovers</a>
                </li>
                <li>
                  <a
                    href="https://demos.creative-tim.com/argon-design-system/docs/components/progress.html">Progress</a>
                </li>
                <li>
                  <a
                    href="https://demos.creative-tim.com/argon-design-system/docs/components/tooltips.html">Tooltips</a>
                </li>
              </ul>
            </div>
            <!-- Show links for all groups -->
            <div class="ct-toc-item active">
              <a class="ct-toc-link"
                 href="https://demos.creative-tim.com/argon-design-system/docs/plugins/datepicker.html">Plugins</a>
              <ul class="nav ct-sidenav">
                <li>
                  <a
                    href="https://demos.creative-tim.com/argon-design-system/docs/plugins/datepicker.html">Datepicker</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/plugins/headroom.html">Headroom</a>
                </li>
                <li>
                  <a href="https://demos.creative-tim.com/argon-design-system/docs/plugins/sliders.html">Sliders</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 ct-content" role="main">
          <div class="ct-page-title">
            <h1 class="ct-title" id="content">Repositories</h1>
          </div>
          <table class="table">
            <thead class="thead-light">
            <tr>
              <th scope="col">Repository Name</th>
              <th scope="col">Type</th>
              <th scope="col">Rating</th>
              <th scope="col">Room</th>
              <th scope="col">Clone URL</th>
            </tr>
            </thead>
            <tbody>
            <tr v-for="repo in repos" :key="repo">
              <th scope="row">{{ repo.name }}</th>
              <td>Python</td>
              <td>100%</td>
              <td>Python-Flask</td>
              <td>{{ repo.clone_url }}</td>
            </tr>
            </tbody>
          </table>
          <ul>
            <li v-for="org in orgs" :key="org">
              {{ org.name }} - {{ org.installation_id }}
            </li>
          </ul>
        </main>
      </div>
    </div>
  </div>
</template>
<style>
  @import '../assets/css/argon.css';
  @import '../assets/css/css.css';
  @import '../assets/css/docs.min.css';
</style>
<script>
  import axios from 'axios';

  export default {
    components: {},
    data() {
      return {
        token: localStorage.getItem('user-token'),
        orgs: [],
        org_id: 932356,
        repos: []
      };
    },
    methods: {
      getOrganizations() {
        if (localStorage.getItem('user-token')) {
          this.orgs = axios.post('http://localhost:8000/organizations', null, {
            params: {
              jwt: this.token
            }
          })
            .then(
              response =>
                this.orgs = response.data,
            );
        } else {
          console.log('Not logged in!');
        }
      },
      getRepositories() {
        if (localStorage.getItem('user-token')) {
          this.orgs = axios.post('http://localhost:8000/repositories', null, {
            params: {
              jwt: this.token,
              org_id: this.org_id
            }
          })
            .then(
              response =>
                this.repos = response.data,
            );
        } else {
          console.log('Not logged in!');
        }
      }
    },

    mounted() {
      this.getOrganizations();
      this.getRepositories();
    },
  };
</script>
